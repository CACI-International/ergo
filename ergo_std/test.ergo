type = {
    enum = {
        MapResult = std:type:enum MapResult {
            Ok = std:Map
            Error = std:String
        }

        ok = MapResult:Ok {}
        err = MapResult:Error "oh no"
        std:debug :MapResult:Ok
        std:debug :ok
        !:MapResult = :ok
        !:MapResult = :err
        MapResult _ = :ok
        MapResult:Ok {} = :ok
        MapResult:Error "oh no" = :err
        std:Bool:true
    }

    struct = {
        StringPair = std:type:struct StringPair {
            first = std:String
            second = std:String
        }
        pair = StringPair: { first = hello, second = world }
        StringPair _ = :pair
        StringPair: {first = hello, second = world} = :pair
        std:Bool:true
    }
}

eval = {
    function = {
        std:String hi = std:eval { "hi" }
        std:Bool:true
    }
    pattern = {
        std:eval hi = { "hi" }
        std:Bool:true
    }
    error = {
        std:Error _ = std:eval <| std:Error: "oh no"
        std:Bool:true
    }
}

required = {
    exists = {
        std:required _ = hi
        std:Bool:true
    }
    missing = std:match { std:required _ = :unset } [
        std:Error _ -> std:Bool:true
        _ -> std:Bool:false
    ]
}

std:test:run { type, eval, required }
