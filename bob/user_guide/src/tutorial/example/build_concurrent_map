#!/usr/bin/env bob

# Compile function, taking one argument indicating the file to compile.
compile = fn {
    c++ -o { file = obj, env = { PATH = $ } } -c (track $@:0)
    obj
}

# Executable-linking function, which links all arguments.
link_exe = fn {
    c++ -o { file = exe, env = { PATH = $ } } $@
    exe
}

# Create a list of files
files = $ [
    main.cpp
    lib.cpp
]

# Compile files, link the object files together, and link the result in the
# current directory.
ln -f (link_exe (map $compile $files)) forty_two
