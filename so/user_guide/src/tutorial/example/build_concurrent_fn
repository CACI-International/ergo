#!/usr/bin/env so

# Compile function, taking one argument indicating the file to compile.
compile = fn {
    c++ -o { file = obj, env = { PATH = $ } } -c (track $@:0)
    obj
}

# Executable-linking function, which links all arguments.
link_exe = fn {
    c++ -o { file = exe, env = { PATH = $ } } $@
    exe
}

# Compile main.cpp
main = compile main.cpp
# Compile lib.cpp
lib = compile lib.cpp

# Link the object files together
exe = link_exe $main $lib

# Link to a file in the current directory.
ln -f $exe forty_two
