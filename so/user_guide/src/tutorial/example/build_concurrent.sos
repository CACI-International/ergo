#!/usr/bin/env so

# Compile main.cpp
main = cache seq ^[
    out = path new
    exec ^{env = {PATH=$}} c++ -o $out -c (track main.cpp)
    $out
]

# Compile lib.cpp
lib = cache seq ^[
    out = path new
    exec ^{env = {PATH=$}} c++ -o $out -c (track lib.cpp)
    $out
]

# Link the object files together
exe = cache seq ^[
    out = path new
    exec ^{env = {PATH=$}} c++ -o $out $main $lib
    $out
]

# Copy to a file in the current directory.
fs copy $exe (path join $work-dir forty_two)
